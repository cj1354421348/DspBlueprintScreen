# 模块: data (游戏静态数据)

### 导航 (Navigation)
[返回根目录](../../CLAUDE.md)

---

## 模块概述 (Module Overview)

`data` 模块是整个应用的数据基石，负责提供所有与《戴森球计划》游戏内容相关的静态数据。它封装了游戏中所有的物品（Items）、配方（Recipes）、图标（Icons）等核心信息，并通过高效的数据结构（如 `Map`）和类型安全的接口，为上层业务逻辑提供了稳定、可靠的数据源。

## 核心职责 (Core Responsibilities)

1.  **数据提供**: 集中管理游戏的所有静态数据，包括但不限于物品、配方、科技、图标等。
2.  **数据加工**: 将原始的数据数组（存储在 `*Data.ts` 文件中）转换为通过ID快速查找的 `Map` 对象，提高数据访问效率。
3.  **类型定义**: 为所有游戏数据提供严格的 TypeScript 类型定义（`types.ts`），确保数据在应用内部流转时的类型安全。
4.  **辅助函数**: 提供一系列类型守卫函数（如 `isStation`, `isBelt`），将对物品ID的判断逻辑封装起来，提高代码的可读性和可维护性。
5.  **数据生成**: 目录内包含一系列 Python 脚本 (`gen_*.py`)，表明该模块的数据有能力从游戏源文件或其他数据源自动生成和更新。

## 关键文件索引 (Key File Index)

| 文件路径 | 主要职责 | 关键组件/函数 |
| :--- | :--- | :--- |
| `index.ts` | 模块统一出口 | `itemsMap`, `recipesMap` |
| `items.ts` | 物品数据处理与访问 | `itemsMap`, `isStation()`, `isLab()`, etc. |
| `recipes.ts` | 配方数据处理与访问 | `recipesMap` |
| `icons.ts` | 图标数据处理与访问 | `recipeIconId()` |
| `itemsData.ts` | 原始物品数据数组 | `items` (array) |
| `recipesData.ts`| 原始配方数据数组 | `recipes` (array) |
| `types.ts` | 模块内所有数据结构的类型定义 | `Item`, `Recipe` (interfaces) |
| `gen_*.py` | 用于从外部源生成数据的Python脚本 | - |

## 架构模式 (Architectural Pattern)

该模块采用了清晰的“**原始数据 -> 数据加工 -> 统一出口**”的分层模式：

1.  **原始数据层 (`*Data.ts`)**: 这些文件只包含从数据源（可能是游戏文件或API）直接导出的原始数据数组，职责单一。
2.  **加工与访问层 (`items.ts`, `recipes.ts`)**: 这一层负责在应用启动时，将原始数据数组转换为 `Map` 对象，以实现 O(1) 复杂度的快速访问。同时，这一层也封装了所有与该数据相关的业务逻辑和辅助函数。
3.  **出口层 (`index.ts`)**: 作为模块的唯一入口，它清晰地定义了向外暴露的接口，隐藏了内部实现细节。

这种分层不仅使得代码结构清晰、易于维护，也为性能优化（如按需加载）提供了可能。

## AI 使用指引 (AI Usage Guide)

1.  **数据访问入口**: 任何需要获取物品或配方信息的地方，都应该通过导入本模块的 `itemsMap` 和 `recipesMap` 来进行，而不是试图直接访问原始数据文件。
2.  **ID 判断**: 在需要根据物品ID判断其类型时，应优先使用 `items.ts` 中提供的 `is*` 系列函数，以避免在业务代码中出现“魔术数字”。
3.  **数据更新**: 如果游戏版本更新导致物品或配方数据变化，应优先考虑运行 `gen_*.py` 脚本来自动更新 `*Data.ts` 文件，而不是手动修改。
4.  **扩展数据**: 当需要为应用添加新的静态数据类型时（例如，科技树），应遵循本模块现有的分层模式，创建对应的 `newDataTypeData.ts`, `newDataType.ts`，并在 `index.ts` 中导出。
