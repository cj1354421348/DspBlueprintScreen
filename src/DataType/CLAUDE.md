# 模块: DataType (核心数据类型)

### 导航 (Navigation)
[返回根目录](../../CLAUDE.md)

---

## 模块概述 (Module Overview)

`DataType` 模块是应用自定义数据结构的核心定义区。它为整个应用中流转的关键业务对象提供了明确的 TypeScript 类和枚举，确保了数据的一致性、可预测性和类型安全。这些数据类型是连接上层UI交互、中层业务逻辑（如筛选、统计）和下层数据存储（如文件序列化）的关键枢纽。

## 核心职责 (Core Responsibilities)

1.  **定义蓝图元信息**: 提供 `newBaseData` 类，用于封装和持久化每个蓝图文件的核心元数据。
2.  **定义蓝图统计数据**: 提供 `newitemData` 类，用于结构化地存储单个蓝图经过预处理后的统计信息，这是实现高效筛选的基础。
3.  **定义UI交互类型**: 提供 `iconType` 枚举，用于区分主界面上不同的筛选模式，指导UI组件的行为。

## 关键文件索引 (Key File Index)

| 文件路径 | 主要职责 | 关键组件/函数 |
| :--- | :--- | :--- |
| `BaseData.ts` | 定义蓝图文件的核心元数据结构 | `newBaseData` (class) |
| `tiemData.ts` | 定义单个蓝图的统计数据结构 | `newitemData` (class) |
| `typeEnum.ts` | 定义UI筛选模式的枚举 | `iconType` (enum) |

## 数据结构分析 (Data Structure Analysis)

### `newBaseData`
这个类是 `MapData` 单例中管理的核心对象。它将一个蓝图的所有相关信息聚合在一起：
- `name`: 蓝图的用户友好名称。
- `MD5`: 蓝图内容的唯一标识符，用作主键。
- `path`: 指向原始 `.txt` 蓝图文件的指针。
- `outPath`: 指向预处理后的 `.json` 统计数据文件的指针。
通过这个结构，应用可以在筛选出目标MD5后，快速定位到原始文件进行导出。

### `newitemData`
这是应用性能优化的关键。在“初始化”阶段，每个蓝图都被解析并转换成一个 `newitemData` 对象，其中包含了用于筛选的所有必要信息：
- `longItem`: 建筑总数。
- `typtItem`: `Map<物品ID, 数量>`，记录配方产物。
- `numItem`: `Map<建筑ID, 数量>`，记录建筑类型。
通过将这些统计数据预先计算并缓存（物理上存为 `.json` 文件，内存中由 `MapPool` 管理），“筛选”操作可以避免重复解析整个蓝图库，从而极大地提升了响应速度。

### `iconType`
一个简单的枚举，但它清晰地定义了 `HomeView` 筛选逻辑的三种不同分支，并作为 props 传递给 `BuildingIcon` 组件，使其能够根据当前模式将用户选择的ID正确地注册到 `SeleceManag` 服务中。

## AI 使用指引 (AI Usage Guide)

1.  **数据驱动开发**: 在添加新功能时，应首先思考是否需要定义新的数据类型来支持该功能。一个良好定义的数据结构是清晰逻辑的开始。
2.  **保持不可变性**: 当在应用中传递这些数据对象时，应尽量将其视为不可变对象。如果需要修改，最好是创建新的实例而不是直接修改现有对象的属性，以避免产生意外的副作用（特别是在与Vue的响应式系统交互时）。
3.  **扩展枚举**: 如果未来增加了新的筛选模式（例如，按建筑模块筛选），应首先在 `iconType` 枚举中添加新的成员，然后驱动UI和逻辑层进行相应的适配。
